# vnote
wenote
一个 多人在线任意编辑的记事本提供修改线路以查看更改信息
*Master

【功能目标】
该网站主要为实现以下目标：
1.一个简单的云端记事功能，即一个记事本功能：
    当你需要记录一些东西时，可以选择使用qq、微信等软件。这里为你提供了一个新的选择。它的优点：
    1）bs模式的便携，你可以在任何公众设备上直接打开网页看到你需要的内容而不用担心账号隐私问题。
    2）你可以方便的把记事分享给其他人，并给了他们一个对你的记事内容进行评价的渠道（只写模式）。
2.一个简单的协同办公模式：
    当有一个目标文档需要多人协同实现时，可以借助这个页面来绕开繁琐的协同办公工具而简单的实现类似的功能
   情景设想：用户A在页面写下基本目标后把页面分享给其他用户，用户B打开页面开始自己写下自己的想法，用户C也打开了页面并看到B正在写一些东西，C对于B写的东西有些想法，C发起编辑权限申请并在得到B同意后给予的权限后开始修改文本，B可以看到C正在做的修改，B在聊天区对于C的修改进行了评价。

【设计思想】
核心功能：
1.网站要实现打开网页自动分配网址：拦截所有url请求，如果当前请求的url 已存在则打开，如果不存在则随机生成一个不在数据库中的url地址。
2.实现保持该页面的数据一直处于最新版本：使用jquery不停的向数据库发送请求最新版本数据
3.实现多人同时编辑一个页面时，编辑权限的分配问题：
   1）当向窗口键入文本时会向服务器请求编辑权限，服务端判断是否有人在编辑，如果没人则给予编辑权限。
   2）当停止键入文本一段时间后（6s），或是失去页面焦点后，或者页面被关闭后，则向服务器发送信号，表示自己放弃编辑权限。
   3）服务端根据是否编辑权限已被申请，或者距离上次申请编辑权限已经过去一段时间（6s），则视为放弃编辑权限
   4）对于得到权限的客户端，可以向窗口键入文本。对于没有权限的客户端，可以即时的看到文本内容的最新版本，但是无法修改内容。

扩展功能：
1.只写模式：在该模式下，页面类似留言板，处于公开状态，任何用户都可以在该页面留言。留言内容会自动添加到文本的首行位置，并添加分割线分割。
2.密码功能：可以对页面进行密码锁定
   1）在编辑模式下，不输入密码的客户端无法看到文本内容。是私有模式。
   2）在只写模式下，不输入密码依然可以看到文本内容和添加留言，是公开模式。但是切换页面到编辑模式时需要输入密码才可以切换，即没有密码则无法修改页面内容。
